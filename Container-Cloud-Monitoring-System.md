# 新一代容器云监控系统

[TOC]



## 1 Prometheus Overview

### 1.1 Prometheus Architecture

<img src="./images/Prometheus Architecture.png" alt="docker-containerized-appliction"  />

### 1.2 Prometheus Features

- 多维数据模型：由度量名称和键值对标识的时间序列数据
- 内置时间序列数据库：TSDB
- PromSQL：一种灵活的查询语言，可以利用多维数据完成复杂查询
- 基于HTTP的pull方式采集时间序列数据（exporter）
- 同时支持PushGateway组建收集数据
- 通过服务发现或者静态配置发现目标
- 多种图形模式和仪表盘支持
- 支持作为数据源接入Grafana

## 2 Comparing Prometheus and Zabbix

| Prometheus                                                   | Zabbix                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 后端用Go开发，定制化难度较低                                 | 后端用C开发，界面用PHP开发，定制化难度较高                   |
| 更适合云环境的监控，尤其对K8S有着更好的支持                  | 更适合监控物理机，虚拟机                                     |
| 监控数据存储于基于时间序列的数据库内，便于对已有的数据进行新的聚合操作 | 监控数据存储于关系型数据库，如Mysql，很难从现有的数据库中扩展纬度 |
| 自身界面相对弱，需要借助配置文件，但可以由Grafana出图        | 图形化界面相对成熟，界面上基本可以完成所有的配置             |
| 支持更大的集群规模，速度也更快                               | 集群规模上限为10000个节点                                    |
| 2015年开始快速发展，社区活跃，适用场景越来越多               | 发展时间更长，对于很多监控场景，都有现成的解决方案           |



